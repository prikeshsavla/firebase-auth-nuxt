{"version":3,"file":"pages_secret.js","sources":["webpack:///./pages/secret.vue?730a","webpack:///./helpers/index.js","webpack:///./pages/secret.vue","webpack:///./pages/secret.vue?92ce","webpack:///./pages/secret.vue?26e0"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_vm._ssrNode(\"<h1 class=\\\"text-3xl\\\">This is secret info</h1>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import jwtDecode from 'jwt-decode'\r\nvar cookieparser = require('cookieparser')\r\n\r\nexport function getUserFromCookie(req) {\r\n  if (process.server && process.static) return\r\n  if (!req.headers.cookie) return\r\n\r\n  if (req.headers.cookie) {\r\n    const parsed = cookieparser.parse(req.headers.cookie)\r\n    const accessTokenCookie = parsed.access_token\r\n    if (!accessTokenCookie) return\r\n\r\n    const decodedToken = jwtDecode(accessTokenCookie)\r\n    if (!decodedToken) return\r\n\r\n    return decodedToken\r\n  }\r\n}\r\n\r\nexport function getUserFromSession(req) {\r\n  console.log('[CHECK-AUTH] - checking if user is stored in session')\r\n  return req.session ? req.session.userId : null\r\n}\r\n","//\n//\n//\n//\n//\n//\n\r\nimport {getUserFromCookie} from '@/helpers'\r\nimport * as firebase from 'firebase/app'\r\nexport default {\r\n\r\n  asyncData({req, redirect}){\r\n    if(process.server){\r\n\r\n       const user = getUserFromCookie(req);\r\n        if(!user){\r\n            redirect('/login')\r\n        }\r\n    }\r\n    else{\r\n      let user = firebase.auth().currentUser\r\n      if(!user){\r\n          redirect('/login')\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./secret.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./secret.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./secret.vue?vue&type=template&id=78ee4294&\"\nimport script from \"./secret.vue?vue&type=script&lang=js&\"\nexport * from \"./secret.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"25a384e6\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;ACFA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA,aAMA;AACA;AACA;AAjBA;;ACTA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}